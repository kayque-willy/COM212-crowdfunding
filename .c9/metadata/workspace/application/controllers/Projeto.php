{"filter":false,"title":"Projeto.php","tooltip":"/application/controllers/Projeto.php","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":372,"column":30},"end":{"row":372,"column":31},"action":"insert","lines":["d"],"id":101}],[{"start":{"row":372,"column":31},"end":{"row":372,"column":32},"action":"insert","lines":["="],"id":102}],[{"start":{"row":372,"column":32},"end":{"row":372,"column":34},"action":"insert","lines":["''"],"id":103}],[{"start":{"row":372,"column":35},"end":{"row":372,"column":36},"action":"insert","lines":["{"],"id":104}],[{"start":{"row":372,"column":36},"end":{"row":372,"column":37},"action":"insert","lines":["}"],"id":105}],[{"start":{"row":372,"column":36},"end":{"row":374,"column":1},"action":"insert","lines":["","\t\t","\t"],"id":106}],[{"start":{"row":373,"column":2},"end":{"row":374,"column":0},"action":"insert","lines":["",""],"id":107},{"start":{"row":374,"column":0},"end":{"row":374,"column":2},"action":"insert","lines":["\t\t"]}],[{"start":{"row":373,"column":2},"end":{"row":374,"column":0},"action":"insert","lines":["",""],"id":108},{"start":{"row":374,"column":0},"end":{"row":374,"column":2},"action":"insert","lines":["\t\t"]}],[{"start":{"row":374,"column":2},"end":{"row":375,"column":0},"action":"insert","lines":["",""],"id":109},{"start":{"row":375,"column":0},"end":{"row":375,"column":2},"action":"insert","lines":["\t\t"]}],[{"start":{"row":374,"column":2},"end":{"row":376,"column":2},"action":"insert","lines":["//Restrição de acesso","\t\tif(($_SESSION['tipo']!='Administrativo') and ($_SESSION['tipo']!='Gestor de Projetos')) redirect('/projeto/', 'refresh');","\t\t"],"id":110}],[{"start":{"row":264,"column":0},"end":{"row":264,"column":1},"action":"remove","lines":["\t"],"id":111}],[{"start":{"row":263,"column":3},"end":{"row":264,"column":1},"action":"remove","lines":["","\t"],"id":112}],[{"start":{"row":376,"column":2},"end":{"row":377,"column":0},"action":"insert","lines":["",""],"id":113},{"start":{"row":377,"column":0},"end":{"row":377,"column":2},"action":"insert","lines":["\t\t"]}],[{"start":{"row":377,"column":2},"end":{"row":378,"column":0},"action":"insert","lines":["",""],"id":114},{"start":{"row":378,"column":0},"end":{"row":378,"column":2},"action":"insert","lines":["\t\t"]}],[{"start":{"row":377,"column":2},"end":{"row":395,"column":3},"action":"insert","lines":["\t//Recupera os dados","\t\tif(!empty($cod)){","\t\t\t$filtro['codigo']=$cod;","\t\t\t","\t\t\t//Carrega a model","\t\t\t$this->load->model('projeto_model');","\t\t\t\t","\t\t\t//Cria um novo objeto projeto","\t\t\t$projeto = new Projeto_model();","\t\t\t","\t\t\t//consulta o projeto pelo codigo","\t\t\t$data['projeto']=$projeto->select($filtro);","\t\t\t","\t\t\t//Carrega a view ","\t\t\t$this->load->view('CRUD_projeto/editPROJETO',$data); ","\t\t}else{","\t\t\t//Se a operação não for bem sucedida, redireciona a consulta com mensagem de falha","\t\t\tredirect('/projeto/consultar/alt_falha', 'refresh');","\t\t}"],"id":115}],[{"start":{"row":377,"column":2},"end":{"row":377,"column":3},"action":"remove","lines":["\t"],"id":116}],[{"start":{"row":391,"column":35},"end":{"row":391,"column":38},"action":"remove","lines":["edi"],"id":117}],[{"start":{"row":391,"column":35},"end":{"row":391,"column":36},"action":"remove","lines":["t"],"id":118}],[{"start":{"row":391,"column":35},"end":{"row":391,"column":36},"action":"insert","lines":["r"],"id":119}],[{"start":{"row":391,"column":36},"end":{"row":391,"column":37},"action":"insert","lines":["e"],"id":120}],[{"start":{"row":391,"column":37},"end":{"row":391,"column":38},"action":"insert","lines":["s"],"id":121}],[{"start":{"row":391,"column":38},"end":{"row":391,"column":39},"action":"insert","lines":["t"],"id":122}],[{"start":{"row":391,"column":39},"end":{"row":391,"column":40},"action":"insert","lines":["r"],"id":123}],[{"start":{"row":391,"column":40},"end":{"row":391,"column":41},"action":"insert","lines":["i"],"id":124}],[{"start":{"row":391,"column":41},"end":{"row":391,"column":42},"action":"insert","lines":["c"],"id":125}],[{"start":{"row":391,"column":42},"end":{"row":391,"column":43},"action":"insert","lines":["a"],"id":126}],[{"start":{"row":391,"column":43},"end":{"row":391,"column":44},"action":"insert","lines":["o"],"id":127}],[{"start":{"row":376,"column":2},"end":{"row":377,"column":0},"action":"insert","lines":["",""],"id":128},{"start":{"row":377,"column":0},"end":{"row":377,"column":2},"action":"insert","lines":["\t\t"]}],[{"start":{"row":398,"column":1},"end":{"row":398,"column":2},"action":"remove","lines":["\t"],"id":129}],[{"start":{"row":398,"column":0},"end":{"row":398,"column":1},"action":"remove","lines":["\t"],"id":130}],[{"start":{"row":397,"column":2},"end":{"row":398,"column":0},"action":"remove","lines":["",""],"id":131}],[{"start":{"row":397,"column":1},"end":{"row":397,"column":2},"action":"remove","lines":["\t"],"id":132}],[{"start":{"row":397,"column":0},"end":{"row":397,"column":1},"action":"remove","lines":["\t"],"id":133}],[{"start":{"row":396,"column":3},"end":{"row":397,"column":0},"action":"remove","lines":["",""],"id":134}],[{"start":{"row":376,"column":2},"end":{"row":416,"column":3},"action":"insert","lines":["\t//Recebe os dados do formulario para atualização","\t\tif(!empty($_POST)){","\t\t\t$codigo = (empty($_POST['codigo'])) ? '' : $_POST['codigo'];","\t\t\t$nome = (empty($_POST['nome'])) ? '' : $_POST['nome'];","\t\t\t$descricao = (empty($_POST['descricao'])) ? '' : $_POST['descricao'];","\t\t\t$categoria = (empty($_POST['categoria'])) ? '' : $_POST['categoria'];","\t\t\t$duracao = (empty($_POST['duracao'])) ? '' : $_POST['duracao'];","\t\t\t$valor = (empty($_POST['valor'])) ? '' : $_POST['valor'];","\t\t\t$video = (empty($_POST['video'])) ? '' : $_POST['video'];","\t\t\t$status = (empty($_POST['status'])) ? null : $_POST['status'];","\t\t\t","\t\t\t//Tratamento para salvar a imagem","\t\t\t$imagem=null;","\t\t\t//Se tiver imagem, realiza o upload","\t\t\tif(!empty($_FILES[\"imagem\"]['tmp_name'])) { ","\t\t\t\t$config['upload_path'] = './temp/';","\t\t\t\t$config['allowed_types'] = 'gif|jpg|png';","\t\t\t\t$config['overwrite']=TRUE;","\t\t\t\t$config['max_size']  = '10048000';","\t\t\t\t//$config['max_width'] = '1024';","\t\t\t\t//$config['max_height'] = '768';","\t\t\t\t$this->load->library('upload', $config);","\t\t\t\t$this->upload->do_upload('imagem');","\t\t\t\t$imagem=$this->upload->data();","\t\t\t} ","\t\t\t","\t\t\t//Carrega a model","\t\t\t$this->load->model('projeto_model');","\t\t\t\t","\t\t\t//Cria um novo projeto com os dados do POST","\t\t\t$projeto = new Projeto_model(NULL,$nome,$categoria,$duracao,$valor,$status,$descricao,$video,$imagem);","\t\t\t","\t\t\t//Atualiza o projeto no banco","\t\t\tif($projeto->update($codigo)){","\t\t\t\t//Se a operação for bem sucedida, redireciona com mensagem de sucesso","\t\t\t\tredirect('/projeto/consultar/alt_sucesso', 'refresh');","\t\t\t}else{","\t\t\t\t//Se a operação não for bem sucedida, redireciona a consulta com mensagem de falha","\t\t\t\tredirect('/projeto/consultar/alt_falha', 'refresh');","\t\t\t}","\t\t}"],"id":135}],[{"start":{"row":387,"column":2},"end":{"row":401,"column":3},"action":"remove","lines":["\t//Tratamento para salvar a imagem","\t\t\t$imagem=null;","\t\t\t//Se tiver imagem, realiza o upload","\t\t\tif(!empty($_FILES[\"imagem\"]['tmp_name'])) { ","\t\t\t\t$config['upload_path'] = './temp/';","\t\t\t\t$config['allowed_types'] = 'gif|jpg|png';","\t\t\t\t$config['overwrite']=TRUE;","\t\t\t\t$config['max_size']  = '10048000';","\t\t\t\t//$config['max_width'] = '1024';","\t\t\t\t//$config['max_height'] = '768';","\t\t\t\t$this->load->library('upload', $config);","\t\t\t\t$this->upload->do_upload('imagem');","\t\t\t\t$imagem=$this->upload->data();","\t\t\t} ","\t\t\t"],"id":136}],[{"start":{"row":387,"column":1},"end":{"row":387,"column":2},"action":"remove","lines":["\t"],"id":137}],[{"start":{"row":387,"column":0},"end":{"row":387,"column":1},"action":"remove","lines":["\t"],"id":138}],[{"start":{"row":386,"column":3},"end":{"row":387,"column":0},"action":"remove","lines":["",""],"id":139}],[{"start":{"row":379,"column":3},"end":{"row":382,"column":66},"action":"remove","lines":["$nome = (empty($_POST['nome'])) ? '' : $_POST['nome'];","\t\t\t$descricao = (empty($_POST['descricao'])) ? '' : $_POST['descricao'];","\t\t\t$categoria = (empty($_POST['categoria'])) ? '' : $_POST['categoria'];","\t\t\t$duracao = (empty($_POST['duracao'])) ? '' : $_POST['duracao'];"],"id":140}],[{"start":{"row":379,"column":2},"end":{"row":379,"column":3},"action":"remove","lines":["\t"],"id":141}],[{"start":{"row":379,"column":1},"end":{"row":379,"column":2},"action":"remove","lines":["\t"],"id":142}],[{"start":{"row":376,"column":2},"end":{"row":376,"column":3},"action":"remove","lines":["\t"],"id":143}],[{"start":{"row":380,"column":3},"end":{"row":380,"column":9},"action":"remove","lines":["$valor"],"id":144},{"start":{"row":380,"column":3},"end":{"row":380,"column":15},"action":"insert","lines":["$prazoMaximo"]}],[{"start":{"row":381,"column":3},"end":{"row":381,"column":9},"action":"remove","lines":["$video"],"id":145},{"start":{"row":381,"column":3},"end":{"row":381,"column":15},"action":"insert","lines":["$valorMaximo"]}],[{"start":{"row":382,"column":3},"end":{"row":382,"column":10},"action":"remove","lines":["$status"],"id":146},{"start":{"row":382,"column":3},"end":{"row":382,"column":15},"action":"insert","lines":["$valorMinimo"]}],[{"start":{"row":380,"column":33},"end":{"row":380,"column":38},"action":"remove","lines":["valor"],"id":147},{"start":{"row":380,"column":33},"end":{"row":380,"column":45},"action":"insert","lines":["$prazoMaximo"]}],[{"start":{"row":380,"column":33},"end":{"row":380,"column":34},"action":"remove","lines":["$"],"id":148}],[{"start":{"row":379,"column":0},"end":{"row":379,"column":1},"action":"remove","lines":["\t"],"id":149}],[{"start":{"row":378,"column":63},"end":{"row":379,"column":0},"action":"remove","lines":["",""],"id":150}],[{"start":{"row":380,"column":33},"end":{"row":380,"column":38},"action":"remove","lines":["video"],"id":151},{"start":{"row":380,"column":33},"end":{"row":380,"column":45},"action":"insert","lines":["$valorMaximo"]}],[{"start":{"row":380,"column":33},"end":{"row":380,"column":34},"action":"remove","lines":["$"],"id":152}],[{"start":{"row":381,"column":33},"end":{"row":381,"column":39},"action":"remove","lines":["status"],"id":153},{"start":{"row":381,"column":33},"end":{"row":381,"column":45},"action":"insert","lines":["$valorMinimo"]}],[{"start":{"row":381,"column":33},"end":{"row":381,"column":34},"action":"remove","lines":["$"],"id":154}],[{"start":{"row":379,"column":64},"end":{"row":379,"column":69},"action":"remove","lines":["valor"],"id":155},{"start":{"row":379,"column":64},"end":{"row":379,"column":75},"action":"insert","lines":["prazoMaximo"]}],[{"start":{"row":380,"column":64},"end":{"row":380,"column":69},"action":"remove","lines":["video"],"id":156},{"start":{"row":380,"column":64},"end":{"row":380,"column":75},"action":"insert","lines":["valorMaximo"]}],[{"start":{"row":381,"column":66},"end":{"row":381,"column":72},"action":"remove","lines":["status"],"id":157},{"start":{"row":381,"column":66},"end":{"row":381,"column":77},"action":"insert","lines":["valorMinimo"]}],[{"start":{"row":381,"column":51},"end":{"row":381,"column":55},"action":"remove","lines":["null"],"id":158},{"start":{"row":381,"column":51},"end":{"row":381,"column":52},"action":"insert","lines":["'"]}],[{"start":{"row":381,"column":52},"end":{"row":381,"column":53},"action":"insert","lines":["'"],"id":159}],[{"start":{"row":387,"column":103},"end":{"row":387,"column":104},"action":"insert","lines":[","],"id":160}],[{"start":{"row":387,"column":104},"end":{"row":387,"column":116},"action":"insert","lines":["$prazoMaximo"],"id":161}],[{"start":{"row":387,"column":116},"end":{"row":387,"column":117},"action":"insert","lines":[","],"id":162}],[{"start":{"row":387,"column":117},"end":{"row":387,"column":129},"action":"insert","lines":["$valorMaximo"],"id":163}],[{"start":{"row":387,"column":129},"end":{"row":387,"column":130},"action":"insert","lines":[","],"id":164}],[{"start":{"row":387,"column":130},"end":{"row":387,"column":142},"action":"insert","lines":["$valorMinimo"],"id":165}],[{"start":{"row":387,"column":96},"end":{"row":387,"column":103},"action":"remove","lines":["$imagem"],"id":166},{"start":{"row":387,"column":96},"end":{"row":387,"column":97},"action":"insert","lines":["n"]}],[{"start":{"row":387,"column":97},"end":{"row":387,"column":98},"action":"insert","lines":["u"],"id":167}],[{"start":{"row":387,"column":98},"end":{"row":387,"column":99},"action":"insert","lines":["l"],"id":168}],[{"start":{"row":387,"column":99},"end":{"row":387,"column":100},"action":"insert","lines":["l"],"id":169}],[{"start":{"row":387,"column":89},"end":{"row":387,"column":95},"action":"remove","lines":["$video"],"id":170},{"start":{"row":387,"column":89},"end":{"row":387,"column":90},"action":"insert","lines":["n"]}],[{"start":{"row":387,"column":90},"end":{"row":387,"column":91},"action":"insert","lines":["u"],"id":171}],[{"start":{"row":387,"column":91},"end":{"row":387,"column":92},"action":"insert","lines":["l"],"id":172}],[{"start":{"row":387,"column":92},"end":{"row":387,"column":93},"action":"insert","lines":["l"],"id":173}],[{"start":{"row":387,"column":78},"end":{"row":387,"column":88},"action":"remove","lines":["$descricao"],"id":174},{"start":{"row":387,"column":78},"end":{"row":387,"column":79},"action":"insert","lines":["n"]}],[{"start":{"row":387,"column":79},"end":{"row":387,"column":80},"action":"insert","lines":["u"],"id":175}],[{"start":{"row":387,"column":80},"end":{"row":387,"column":81},"action":"insert","lines":["l"],"id":176}],[{"start":{"row":387,"column":81},"end":{"row":387,"column":82},"action":"insert","lines":["l"],"id":177}],[{"start":{"row":387,"column":70},"end":{"row":387,"column":77},"action":"remove","lines":["$status"],"id":178},{"start":{"row":387,"column":70},"end":{"row":387,"column":71},"action":"insert","lines":["n"]}],[{"start":{"row":387,"column":71},"end":{"row":387,"column":72},"action":"insert","lines":["u"],"id":179}],[{"start":{"row":387,"column":72},"end":{"row":387,"column":73},"action":"insert","lines":["l"],"id":180}],[{"start":{"row":387,"column":73},"end":{"row":387,"column":74},"action":"insert","lines":["l"],"id":181}],[{"start":{"row":387,"column":63},"end":{"row":387,"column":69},"action":"remove","lines":["$valor"],"id":182},{"start":{"row":387,"column":63},"end":{"row":387,"column":64},"action":"insert","lines":["n"]}],[{"start":{"row":387,"column":64},"end":{"row":387,"column":65},"action":"insert","lines":["u"],"id":183}],[{"start":{"row":387,"column":65},"end":{"row":387,"column":66},"action":"insert","lines":["l"],"id":184}],[{"start":{"row":387,"column":66},"end":{"row":387,"column":67},"action":"insert","lines":["l"],"id":185}],[{"start":{"row":387,"column":54},"end":{"row":387,"column":62},"action":"remove","lines":["$duracao"],"id":186},{"start":{"row":387,"column":54},"end":{"row":387,"column":55},"action":"insert","lines":["n"]}],[{"start":{"row":387,"column":55},"end":{"row":387,"column":56},"action":"insert","lines":["u"],"id":187}],[{"start":{"row":387,"column":56},"end":{"row":387,"column":57},"action":"insert","lines":["l"],"id":188}],[{"start":{"row":387,"column":57},"end":{"row":387,"column":58},"action":"insert","lines":["l"],"id":189}],[{"start":{"row":387,"column":43},"end":{"row":387,"column":53},"action":"remove","lines":["$categoria"],"id":190},{"start":{"row":387,"column":43},"end":{"row":387,"column":44},"action":"insert","lines":["n"]}],[{"start":{"row":387,"column":44},"end":{"row":387,"column":45},"action":"insert","lines":["u"],"id":191}],[{"start":{"row":387,"column":45},"end":{"row":387,"column":46},"action":"insert","lines":["l"],"id":192}],[{"start":{"row":387,"column":46},"end":{"row":387,"column":47},"action":"insert","lines":["l"],"id":193}],[{"start":{"row":387,"column":37},"end":{"row":387,"column":42},"action":"remove","lines":["$nome"],"id":194},{"start":{"row":387,"column":37},"end":{"row":387,"column":38},"action":"insert","lines":["n"]}],[{"start":{"row":387,"column":38},"end":{"row":387,"column":39},"action":"insert","lines":["u"],"id":195}],[{"start":{"row":387,"column":39},"end":{"row":387,"column":40},"action":"insert","lines":["l"],"id":196}],[{"start":{"row":387,"column":40},"end":{"row":387,"column":41},"action":"insert","lines":["l"],"id":197}],[{"start":{"row":387,"column":32},"end":{"row":387,"column":36},"action":"remove","lines":["NULL"],"id":198},{"start":{"row":387,"column":32},"end":{"row":387,"column":33},"action":"insert","lines":["n"]}],[{"start":{"row":387,"column":33},"end":{"row":387,"column":34},"action":"insert","lines":["u"],"id":199}],[{"start":{"row":387,"column":34},"end":{"row":387,"column":35},"action":"insert","lines":["l"],"id":200}],[{"start":{"row":387,"column":35},"end":{"row":387,"column":36},"action":"insert","lines":["l"],"id":201}]]},"ace":{"folds":[{"start":{"row":6,"column":26},"end":{"row":25,"column":2},"placeholder":"..."},{"start":{"row":88,"column":39},"end":{"row":140,"column":1},"placeholder":"..."},{"start":{"row":143,"column":43},"end":{"row":195,"column":1},"placeholder":"..."},{"start":{"row":198,"column":34},"end":{"row":264,"column":1},"placeholder":"..."},{"start":{"row":267,"column":34},"end":{"row":289,"column":1},"placeholder":"..."},{"start":{"row":292,"column":41},"end":{"row":310,"column":1},"placeholder":"..."},{"start":{"row":313,"column":57},"end":{"row":343,"column":1},"placeholder":"..."},{"start":{"row":346,"column":36},"end":{"row":368,"column":1},"placeholder":"..."},{"start":{"row":371,"column":36},"end":{"row":418,"column":1},"placeholder":"..."}],"scrolltop":286,"scrollleft":0,"selection":{"start":{"row":371,"column":36},"end":{"row":387,"column":36},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":38,"state":"start","mode":"ace/mode/php"}},"timestamp":1478908537969,"hash":"395d06fc5f2d39e2052292cfcbbea2e229091bd3"}